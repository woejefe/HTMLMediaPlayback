
<!DOCTYPE html>
<html>
 <head>
        <title>Media Playback</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">	
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.13.0/Sortable.min.js"></script>
		
		<link href="https://vjs.zencdn.net/7.11.2/video-js.min.css" rel="stylesheet">
		<script src="https://vjs.zencdn.net/7.11.2/video.min.js"></script>
		
 </head>
<style>

row {
  list-style: none;
  padding: 0;
  margin: 0;
}

row:nth-child(even) {
  background-color: lightblue;
}

row:nth-child(odd) {
  background-color: lightgray;
}
 li {display: block;}

		
</style> 

<body style="background:gray;">	        
		
		<div class="card text-center" style="border: 2px solid green;padding:5px;background:lightgray;"> Upload Media Files(mp4,webm,ogg,mp3,wav,pdf)		  
		  <div class="container"> 		 
		    <input class="card text-center" id="mediaFiles" type="file" multiple style="border: 2px solid blue;padding:10px;background:teal;" accept="application/pdf,audio/mpeg,audio/ogg,audio/wav,video/mp4,video/ogg,video/webm"> </input>
		  </div>		
		</div>							
			
			<h1 class="card text-center my-1" style="border: 2px solid green;padding:5px;background:lightblue;">Media Playback</h1>
        	      
        <div class="card" style="background:lightgray;">
			<sblist class="row" id="sortableplaylist" >	
			
			</sblist>
		</div>
		
<script>

	


	
	const medialist = document.getElementById('sortableplaylist');
	mediaFiles.addEventListener('change', function() {
           for (let i = 0; i < this.files.length; i++){  
				   
   	new Sortable(medialist);
	const file = this.files[i];
    const url = URL.createObjectURL(file);
			
	const listItem = document.createElement("li");
	const sourceItem = document.createElement("source");
	const cuebtn = document.createElement('button');
	const deletebtn = document.createElement('button');	
	const playbtn = document.createElement('button');
	const stopbtn = document.createElement('button');	
	
	const loopbtn = document.createElement('button');
	loopbtn.id="loopbtn";
	
	
	
	const trackcontainer=document.createElement('row');
	 const timeline = document.createElement('input');
	 const starttime = document.createElement('input');
	 const endtime = document.createElement('input');
	timeline.type="range";
	starttime.type="number";
	starttime.id="starttime";
	endtime.type="number";
	endtime.id="endtime";
	
	 
	 const btncontrol=document.createElement('div');
	 const cuecontrol=document.createElement('div');	
	 const playerwindow=document.createElement('div');	
	
	const mediaplayer=document.createElement('video');
			
		  mediaplayer.className="video-js";
		  mediaplayer.setAttribute('data-setup', '{}');
		  mediaplayer.controls = true;
		  mediaplayer.setAttribute("src", url);
		  mediaplayer.load();
		  
	
		  
	const cueup = [document.getElementById('mediaFiles')]	  
	  cueup.forEach((item, index) => {
      listItem.classList.add("list-group-item");
      listItem.setAttribute("data-index", index);
	  listItem.innerText = file.name;
	  cuecontrol.innerText=file.name;  
	  mediaplayer.setAttribute("src", url);	  
	  
	  mediaplayer.setAttribute('data-index', i + 1);    });	
		
		playbtn.addEventListener('click', function() {
         if (mediaplayer.paused || mediaplayer.ended) {
          mediaplayer.play();
          playbtn.textContent = 'Pause';
		  playbtn.style.background='yellow';}
        else {
          mediaplayer.pause();
          playbtn.textContent = 'Play';
		  playbtn.style.background='green';}	});
		
	    loopbtn.addEventListener("click",	() => {		     
	     if (mediaplayer.loop === true) {
		 mediaplayer.loop = false;
		 loopbtn.style.background='lightgray';}
	     else {mediaplayer.loop = true;
		 loopbtn.style.background='blue';}		});
		 
		 stopbtn.addEventListener("click",	() => {
		 mediaplayer.pause();
		 mediaplayer.load();
		 playbtn.textContent = 'Play'
		 });

	const deletetrack =[document.getElementById('sortableplaylist')]
		deletebtn.addEventListener("click", () => {		
	    medialist.removeChild(trackcontainer);	});


	mediaplayer.addEventListener('timeupdate', () => {
  const currentTime = mediaplayer.currentTime;
  const duration = mediaplayer.duration;
  const progress = (currentTime);
  
    timeline.value=`${progress}`; 	});

	 starttime.addEventListener('change',function setStartTime(){
	 mediaplayer.currentTime=starttime.value;	});

	endtime.addEventListener('change',function setEndTime(){
	mediaplayer.currentTime = endtime.value; 


	mediaplayer.addEventListener('timeupdate', function() {
    if (mediaplayer.currentTime >= endtime.value) { // set the end time to input
      mediaplayer.pause();
	  mediaplayer.currentTime=starttime.value;
	  playbtn.style.background="green";
	  playbtn.textContent = 'Play';}		
	if (mediaplayer.loop === true){
	  mediaplayer.play()}
	 
	  
	  });	
		timeline.min=starttime.value;
		timeline.max=endtime.value;
	  
	});

	

	medialist.appendChild(trackcontainer);	
	trackcontainer.appendChild(cuecontrol);
	trackcontainer.appendChild(playerwindow);
	playerwindow.appendChild(mediaplayer);
	trackcontainer.appendChild(btncontrol);	
	
	
	
	btncontrol.appendChild(loopbtn);	
	btncontrol.appendChild(playbtn);
	btncontrol.appendChild(stopbtn);
	
	btncontrol.appendChild(deletebtn);
	
	btncontrol.appendChild(timeline);
	
	btncontrol.appendChild(starttime);
	btncontrol.appendChild(endtime);
	
	
	
		trackcontainer.className="row";
		
	    trackcontainer.style.border="2px solid purple";
	    trackcontainer.style.height="10%";
		
		
		cuecontrol.className="col";
		playerwindow.className="col";
		btncontrol.className="col";
		
		cuecontrol.style.width="33%";
		playerwindow.style.width="33%";
		btncontrol.style.width="33%";
		
		
		stopbtn.innerHTML="STOP";
		loopbtn.innerHTML="Loop";
		playbtn.textContent = 'Play';
		cuebtn.innerHTML="ARM";
		deletebtn.innerHTML="Delete";
		
		loopbtn.style.background="lightgray";
		
		playbtn.style.background="green";
		stopbtn.style.background="orange";
		deletebtn.style.background="red";
	

	
	
	
	}
	});
	 
	

	
	
</script

</body>	

</html>











